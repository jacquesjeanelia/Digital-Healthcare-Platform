(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[915],{6433:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/prescriptions",function(){return t(564)}])},564:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return Prescriptions}});var o=t(5893),n=t(5379),i=t.n(n),s=t(7294),a=t(1163),l=t(9008),d=t.n(l),c=t(1664),p=t.n(c),f=t(7317),h=t.n(f);function Prescriptions(){let e=(0,a.useRouter)(),[r,t]=(0,s.useState)([]),[n,l]=(0,s.useState)(!0),[c,f]=(0,s.useState)(null),[m,x]=(0,s.useState)(null);(0,s.useEffect)(()=>{let r=localStorage.getItem("token");if(!r){e.push("/auth/login");return}let fetchPrescriptions=async()=>{try{let e=await fetch("/api/prescriptions",{headers:{Authorization:"Bearer ".concat(r)}});if(!e.ok)throw Error("Failed to fetch prescriptions: ".concat(e.status));let o=await e.json();t(o.prescriptions)}catch(e){console.error("Error fetching prescriptions:",e),f(e.message||"Failed to load prescriptions")}finally{l(!1)}};fetchPrescriptions()},[e]);let u=null===m?r:r.filter(e=>e.isActive===m),handleRequestRefill=async r=>{let o=localStorage.getItem("token");if(!o){e.push("/auth/login");return}try{let e=await fetch("/api/prescriptions/".concat(r,"/refill"),{method:"POST",headers:{Authorization:"Bearer ".concat(o),"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to request refill: ".concat(e.status));let n=await e.json();t(e=>e.map(e=>e.id===r?{...e,...n.prescription}:e)),alert("Refill request submitted successfully!")}catch(e){console.error("Error requesting refill:",e),alert(e.message||"Failed to request refill")}},formatDate=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return n?(0,o.jsx)("div",{className:h().container,children:(0,o.jsxs)("div",{style:{textAlign:"center",padding:"50px 0"},className:"jsx-7b580fbd0b64e6d5",children:[(0,o.jsx)("h2",{className:"jsx-7b580fbd0b64e6d5",children:"Loading prescriptions..."}),(0,o.jsx)("div",{style:{margin:"20px auto",width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite"},className:"jsx-7b580fbd0b64e6d5"}),(0,o.jsx)(i(),{id:"7b580fbd0b64e6d5",children:"@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]})}):(0,o.jsxs)("div",{className:h().container,children:[(0,o.jsxs)(d(),{children:[(0,o.jsx)("title",{children:"Prescriptions - Digital Healthcare Platform"}),(0,o.jsx)("meta",{name:"description",content:"View and manage your prescriptions"})]}),(0,o.jsxs)("header",{className:h().header,children:[(0,o.jsx)("h1",{children:"My Prescriptions"}),(0,o.jsx)("div",{children:(0,o.jsx)(p(),{href:"/dashboard",style:{marginRight:"15px"},children:"Dashboard"})})]}),(0,o.jsxs)("main",{className:h().main,children:[c&&(0,o.jsx)("div",{style:{padding:"10px",margin:"0 0 20px",background:"#fee2e2",border:"1px solid #ef4444",borderRadius:"8px"},children:(0,o.jsx)("p",{children:c})}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px",flexWrap:"wrap",gap:"15px"},children:[(0,o.jsx)("h2",{style:{margin:0},children:!0===m?"Active Prescriptions":!1===m?"Expired Prescriptions":"All Prescriptions"}),(0,o.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,o.jsx)("button",{onClick:()=>x(null),style:{padding:"8px 12px",backgroundColor:null===m?"#3b82f6":"#f3f4f6",color:null===m?"white":"#4b5563",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:null===m?"bold":"normal"},children:"All"}),(0,o.jsx)("button",{onClick:()=>x(!0),style:{padding:"8px 12px",backgroundColor:!0===m?"#10b981":"#f3f4f6",color:!0===m?"white":"#4b5563",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:!0===m?"bold":"normal"},children:"Active"}),(0,o.jsx)("button",{onClick:()=>x(!1),style:{padding:"8px 12px",backgroundColor:!1===m?"#6b7280":"#f3f4f6",color:!1===m?"white":"#4b5563",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:!1===m?"bold":"normal"},children:"Expired"})]})]}),0===u.length?(0,o.jsxs)("div",{style:{textAlign:"center",padding:"50px 0"},children:[(0,o.jsx)("h2",{children:"No prescriptions found"}),(0,o.jsx)("p",{children:null!==m?"You don't have any ".concat(m?"active":"expired"," prescriptions"):"You don't have any prescriptions yet"})]}):(0,o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"20px"},children:u.map(e=>(0,o.jsxs)("div",{className:h().appointmentCard,style:{borderLeftWidth:"4px",borderLeftStyle:"solid",borderLeftColor:e.isActive?"#10b981":"#6b7280"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px"},children:[(0,o.jsx)("h3",{style:{margin:0,fontSize:"1.2rem"},children:e.medicationName}),(0,o.jsx)("span",{style:{padding:"3px 8px",backgroundColor:e.isActive?"#d1fae5":"#f3f4f6",color:e.isActive?"#047857":"#6b7280",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"bold"},children:e.isActive?"ACTIVE":"EXPIRED"})]}),(0,o.jsxs)("p",{style:{margin:"8px 0",color:"#4b5563"},children:[(0,o.jsx)("strong",{children:"Dosage:"})," ",e.dosage]}),(0,o.jsxs)("p",{style:{margin:"8px 0",color:"#4b5563"},children:[(0,o.jsx)("strong",{children:"Frequency:"})," ",e.frequency]}),(0,o.jsxs)("p",{style:{margin:"8px 0",color:"#4b5563"},children:[(0,o.jsx)("strong",{children:"Dates:"})," ",formatDate(e.startDate)," to ",formatDate(e.endDate)]}),(0,o.jsxs)("p",{style:{margin:"8px 0",color:"#4b5563"},children:[(0,o.jsx)("strong",{children:"Doctor:"})," ",e.doctorName]}),(0,o.jsxs)("p",{style:{margin:"8px 0",color:"#4b5563"},children:[(0,o.jsx)("strong",{children:"Refills:"})," ",e.refillsRemaining," of ",e.refillsTotal," remaining"]}),e.pharmacyName&&(0,o.jsxs)("p",{style:{margin:"8px 0",color:"#4b5563"},children:[(0,o.jsx)("strong",{children:"Pharmacy:"})," ",e.pharmacyName]}),(0,o.jsxs)("div",{style:{marginTop:"15px",paddingTop:"15px",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsx)(p(),{href:"/prescriptions/".concat(e.id),style:{padding:"6px 12px",backgroundColor:"#f3f4f6",borderRadius:"4px",fontSize:"0.9rem",textDecoration:"none",color:"#1f2937"},children:"View Details"}),e.isActive&&e.refillsRemaining>0&&(0,o.jsx)("button",{onClick:()=>handleRequestRefill(e.id),style:{padding:"6px 12px",backgroundColor:"#dbeafe",color:"#2563eb",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem"},children:"Request Refill"})]})]},e.id))})]})]})}},7317:function(e){e.exports={container:"Dashboard_container__KcHrK",header:"Dashboard_header__N6bxR",logoutButton:"Dashboard_logoutButton__oi5JT",main:"Dashboard_main__w685B",grid:"Dashboard_grid__3NToH",card:"Dashboard_card__On9Pb",button:"Dashboard_button__idTka",appointmentsGrid:"Dashboard_appointmentsGrid__IPUk6",appointmentCard:"Dashboard_appointmentCard__uPiye",formContainer:"Dashboard_formContainer__E7yeN",formGroup:"Dashboard_formGroup__MUlGz",formInput:"Dashboard_formInput__teeW5",formSelect:"Dashboard_formSelect__SX1sM",formError:"Dashboard_formError__hDGfH"}}},function(e){e.O(0,[664,379,774,888,179],function(){return e(e.s=6433)}),_N_E=e.O()}]);