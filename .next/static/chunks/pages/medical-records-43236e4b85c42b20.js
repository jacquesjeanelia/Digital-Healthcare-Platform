(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[269],{6447:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/medical-records",function(){return t(627)}])},627:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return MedicalRecords}});var o=t(5893),a=t(5379),i=t.n(a),s=t(7294),n=t(1163),d=t(9008),l=t.n(d),c=t(1664),p=t.n(c),u=t(7317),m=t.n(u);function MedicalRecords(){let e=(0,n.useRouter)(),[r,t]=(0,s.useState)([]),[a,d]=(0,s.useState)(!0),[c,u]=(0,s.useState)(null),[h,f]=(0,s.useState)(""),[x,g]=(0,s.useState)("all");(0,s.useEffect)(()=>{let r=localStorage.getItem("token");if(!r){e.push("/auth/login");return}let fetchMedicalRecords=async()=>{try{let e=await fetch("/api/medical-records",{headers:{Authorization:"Bearer ".concat(r)}});if(!e.ok)throw Error("Failed to fetch medical records: ".concat(e.status));let o=await e.json();t(o.records)}catch(e){console.error("Error fetching medical records:",e),u(e.message||"Failed to load medical records")}finally{d(!1)}};fetchMedicalRecords()},[e]);let b=r.filter(e=>{let r=""===h||e.title.toLowerCase().includes(h.toLowerCase())||e.description.toLowerCase().includes(h.toLowerCase())||e.doctorName.toLowerCase().includes(h.toLowerCase()),t="all"===x||e.recordType===x;return r&&t}),y=b.reduce((e,r)=>{let t=new Date(r.date).getFullYear();return e[t]||(e[t]=[]),e[t].push(r),e},{}),j=Object.keys(y).map(e=>parseInt(e)).sort((e,r)=>r-e),formatDate=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),getRecordTypeIcon=e=>{switch(e){case"labResult":return"\uD83D\uDD2C";case"diagnosis":return"\uD83E\uDE7A";case"prescription":return"\uD83D\uDC8A";case"surgeryReport":return"\uD83C\uDFE5";case"vaccineRecord":return"\uD83D\uDC89";case"radiologyImage":return"\uD83D\uDCF7";case"referral":return"\uD83D\uDCCB";default:return"\uD83D\uDCC4"}},getRecordTypeName=e=>{switch(e){case"labResult":return"Lab Result";case"diagnosis":return"Diagnosis";case"prescription":return"Prescription";case"surgeryReport":return"Surgery Report";case"vaccineRecord":return"Vaccine Record";case"radiologyImage":return"Radiology Image";case"referral":return"Referral";default:return e}};return a?(0,o.jsx)("div",{className:m().container,children:(0,o.jsxs)("div",{style:{textAlign:"center",padding:"50px 0"},className:"jsx-7b580fbd0b64e6d5",children:[(0,o.jsx)("h2",{className:"jsx-7b580fbd0b64e6d5",children:"Loading medical records..."}),(0,o.jsx)("div",{style:{margin:"20px auto",width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite"},className:"jsx-7b580fbd0b64e6d5"}),(0,o.jsx)(i(),{id:"7b580fbd0b64e6d5",children:"@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]})}):(0,o.jsxs)("div",{className:m().container,children:[(0,o.jsxs)(l(),{children:[(0,o.jsx)("title",{children:"Medical Records - Digital Healthcare Platform"}),(0,o.jsx)("meta",{name:"description",content:"View your medical records"})]}),(0,o.jsxs)("header",{className:m().header,children:[(0,o.jsx)("h1",{children:"Medical Records"}),(0,o.jsx)("div",{children:(0,o.jsx)(p(),{href:"/dashboard",style:{marginRight:"15px"},children:"Dashboard"})})]}),(0,o.jsxs)("main",{className:m().main,children:[c&&(0,o.jsx)("div",{style:{padding:"10px",margin:"0 0 20px",background:"#fee2e2",border:"1px solid #ef4444",borderRadius:"8px"},children:(0,o.jsx)("p",{children:c})}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px",flexWrap:"wrap",gap:"15px"},children:[(0,o.jsx)("div",{style:{maxWidth:"400px",width:"100%"},children:(0,o.jsx)("input",{type:"text",placeholder:"Search medical records...",value:h,onChange:e=>f(e.target.value),style:{width:"100%",padding:"10px",border:"1px solid #d1d5db",borderRadius:"4px"}})}),(0,o.jsx)("div",{children:(0,o.jsxs)("select",{value:x,onChange:e=>g(e.target.value),style:{padding:"10px",border:"1px solid #d1d5db",borderRadius:"4px",backgroundColor:"white"},children:[(0,o.jsx)("option",{value:"all",children:"All Record Types"}),(0,o.jsx)("option",{value:"labResult",children:"Lab Results"}),(0,o.jsx)("option",{value:"diagnosis",children:"Diagnoses"}),(0,o.jsx)("option",{value:"prescription",children:"Prescriptions"}),(0,o.jsx)("option",{value:"surgeryReport",children:"Surgery Reports"}),(0,o.jsx)("option",{value:"vaccineRecord",children:"Vaccine Records"}),(0,o.jsx)("option",{value:"radiologyImage",children:"Radiology Images"}),(0,o.jsx)("option",{value:"referral",children:"Referrals"})]})})]}),0===b.length?(0,o.jsxs)("div",{style:{textAlign:"center",padding:"50px 0"},children:[(0,o.jsx)("h2",{children:"No medical records found"}),(0,o.jsx)("p",{children:h||"all"!==x?"Try changing your search or filter criteria":"You don't have any medical records yet"})]}):(0,o.jsx)("div",{children:j.map(e=>(0,o.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,o.jsx)("h2",{style:{fontSize:"1.25rem",borderBottom:"1px solid #e5e7eb",paddingBottom:"8px",marginBottom:"16px"},children:e}),(0,o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:y[e].sort((e,r)=>new Date(r.date).getTime()-new Date(e.date).getTime()).map(e=>(0,o.jsxs)("div",{className:m().appointmentCard,style:{position:"relative",borderLeftWidth:"4px",borderLeftStyle:"solid",borderLeftColor:e.isConfidential?"#ef4444":"#10b981"},children:[e.isConfidential&&(0,o.jsx)("div",{style:{position:"absolute",top:"15px",right:"15px",background:"#fee2e2",color:"#b91c1c",padding:"2px 6px",borderRadius:"4px",fontSize:"0.7rem",fontWeight:"bold"},children:"CONFIDENTIAL"}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[(0,o.jsx)("span",{style:{fontSize:"1.5rem"},children:getRecordTypeIcon(e.recordType)}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:e.title}),(0,o.jsx)("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:getRecordTypeName(e.recordType)})]})]}),(0,o.jsxs)("p",{style:{margin:"5px 0",color:"#4b5563"},children:[(0,o.jsx)("strong",{children:"Date:"})," ",formatDate(e.date)]}),(0,o.jsxs)("p",{style:{margin:"5px 0",color:"#4b5563"},children:[(0,o.jsx)("strong",{children:"Doctor:"})," ",e.doctorName]}),(0,o.jsx)("p",{style:{margin:"10px 0",color:"#1f2937"},children:e.description.length>100?"".concat(e.description.substring(0,100),"..."):e.description}),(0,o.jsxs)("div",{style:{marginTop:"15px"},children:[(0,o.jsx)(p(),{href:"/medical-records/".concat(e.id),style:{padding:"6px 12px",backgroundColor:"#f3f4f6",borderRadius:"4px",fontSize:"0.9rem",textDecoration:"none",color:"#1f2937"},children:"View Details"}),e.fileUrl&&(0,o.jsx)("a",{href:e.fileUrl,target:"_blank",rel:"noopener noreferrer",style:{padding:"6px 12px",backgroundColor:"#dbeafe",color:"#2563eb",borderRadius:"4px",fontSize:"0.9rem",textDecoration:"none",marginLeft:"8px"},children:"View File"})]})]},e.id))})]},e))})]})]})}},7317:function(e){e.exports={container:"Dashboard_container__KcHrK",header:"Dashboard_header__N6bxR",logoutButton:"Dashboard_logoutButton__oi5JT",main:"Dashboard_main__w685B",grid:"Dashboard_grid__3NToH",card:"Dashboard_card__On9Pb",button:"Dashboard_button__idTka",appointmentsGrid:"Dashboard_appointmentsGrid__IPUk6",appointmentCard:"Dashboard_appointmentCard__uPiye",formContainer:"Dashboard_formContainer__E7yeN",formGroup:"Dashboard_formGroup__MUlGz",formInput:"Dashboard_formInput__teeW5",formSelect:"Dashboard_formSelect__SX1sM",formError:"Dashboard_formError__hDGfH"}}},function(e){e.O(0,[664,379,774,888,179],function(){return e(e.s=6447)}),_N_E=e.O()}]);