(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[883],{2962:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/appointments",function(){return n(1801)}])},1801:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Appointments}});var r=n(5893),o=n(5379),a=n.n(o),s=n(7294),i=n(1163),d=n(9008),c=n.n(d),l=n(1664),p=n.n(l),m=n(7317),h=n.n(m);function Appointments(){let e=(0,i.useRouter)(),[t,n]=(0,s.useState)([]),[o,d]=(0,s.useState)(!0),[l,m]=(0,s.useState)(null);(0,s.useEffect)(()=>{let t=localStorage.getItem("token");if(!t){e.push("/auth/login");return}let fetchAppointments=async()=>{try{let e=await fetch("/api/appointments",{headers:{Authorization:"Bearer ".concat(t)}});if(!e.ok)throw Error("Failed to fetch appointments: ".concat(e.status));let r=await e.json();n(r.appointments)}catch(e){console.error("Error fetching appointments:",e),m(e.message||"Failed to load appointments")}finally{d(!1)}};fetchAppointments()},[e]);let handleCancelAppointment=async t=>{if(!confirm("Are you sure you want to cancel this appointment?"))return;let r=localStorage.getItem("token");if(!r){e.push("/auth/login");return}try{let e=await fetch("/api/appointments/".concat(t),{method:"PATCH",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({status:"cancelled"})});if(!e.ok)throw Error("Failed to cancel appointment: ".concat(e.status));n(e=>e.map(e=>e.id===t?{...e,status:"cancelled"}:e))}catch(e){console.error("Error cancelling appointment:",e),m(e.message||"Failed to cancel appointment")}},formatDate=e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).format(t)},getStatusColor=e=>{switch(e){case"scheduled":return"#3b82f6";case"confirmed":return"#10b981";case"in-progress":return"#f59e0b";case"completed":return"#1f2937";case"cancelled":return"#ef4444";default:return"#6b7280"}};return o?(0,r.jsx)("div",{className:h().container,children:(0,r.jsxs)("div",{style:{textAlign:"center",padding:"50px 0"},className:"jsx-7b580fbd0b64e6d5",children:[(0,r.jsx)("h2",{className:"jsx-7b580fbd0b64e6d5",children:"Loading appointments..."}),(0,r.jsx)("div",{style:{margin:"20px auto",width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite"},className:"jsx-7b580fbd0b64e6d5"}),(0,r.jsx)(a(),{id:"7b580fbd0b64e6d5",children:"@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]})}):(0,r.jsxs)("div",{className:h().container,children:[(0,r.jsxs)(c(),{children:[(0,r.jsx)("title",{children:"My Appointments - Digital Healthcare Platform"}),(0,r.jsx)("meta",{name:"description",content:"View and manage your medical appointments"})]}),(0,r.jsxs)("header",{className:h().header,children:[(0,r.jsx)("h1",{children:"My Appointments"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(p(),{href:"/dashboard",style:{marginRight:"15px"},children:"Dashboard"}),(0,r.jsx)(p(),{href:"/appointments/new",className:h().button,children:"Book New Appointment"})]})]}),(0,r.jsxs)("main",{className:h().main,children:[l&&(0,r.jsx)("div",{style:{padding:"10px",margin:"0 0 20px",background:"#fee2e2",border:"1px solid #ef4444",borderRadius:"8px"},children:(0,r.jsx)("p",{children:l})}),0===t.length?(0,r.jsxs)("div",{style:{textAlign:"center",padding:"50px 0"},children:[(0,r.jsx)("h2",{children:"No appointments found"}),(0,r.jsx)("p",{children:"You don't have any appointments scheduled. Book a new appointment to get started."}),(0,r.jsx)(p(),{href:"/appointments/new",className:h().button,style:{marginTop:"20px"},children:"Book New Appointment"})]}):(0,r.jsx)("div",{className:h().appointmentsGrid,children:t.map(e=>(0,r.jsxs)("div",{className:h().appointmentCard,children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[(0,r.jsx)("span",{style:{padding:"4px 10px",borderRadius:"4px",backgroundColor:getStatusColor(e.status),color:"white",fontSize:"0.8rem",fontWeight:"bold",textTransform:"uppercase"},children:e.status}),(0,r.jsxs)("span",{style:{fontSize:"0.9rem"},children:[e.duration," mins"]})]}),(0,r.jsx)("h3",{children:e.type}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Doctor:"})," ",e.doctorName]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Date & Time:"})," ",formatDate(e.dateTime)]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Reason:"})," ",e.reasonForVisit]}),e.location&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Location:"})," ",e.location]}),e.virtualMeetingLink&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Virtual Link:"})," ",(0,r.jsx)("a",{href:e.virtualMeetingLink,target:"_blank",rel:"noopener noreferrer",style:{color:"#3b82f6"},children:"Join Meeting"})]}),(0,r.jsxs)("div",{style:{marginTop:"15px",display:"flex",gap:"10px"},children:[(0,r.jsx)(p(),{href:"/appointments/".concat(e.id),style:{padding:"6px 12px",backgroundColor:"#f3f4f6",borderRadius:"4px",fontSize:"0.9rem",textDecoration:"none",color:"#1f2937"},children:"View Details"}),("scheduled"===e.status||"confirmed"===e.status)&&(0,r.jsx)("button",{onClick:()=>handleCancelAppointment(e.id),style:{padding:"6px 12px",backgroundColor:"#fee2e2",color:"#b91c1c",border:"none",borderRadius:"4px",fontSize:"0.9rem",cursor:"pointer"},children:"Cancel"})]})]},e.id))})]})]})}},7317:function(e){e.exports={container:"Dashboard_container__KcHrK",header:"Dashboard_header__N6bxR",logoutButton:"Dashboard_logoutButton__oi5JT",main:"Dashboard_main__w685B",grid:"Dashboard_grid__3NToH",card:"Dashboard_card__On9Pb",button:"Dashboard_button__idTka",appointmentsGrid:"Dashboard_appointmentsGrid__IPUk6",appointmentCard:"Dashboard_appointmentCard__uPiye",formContainer:"Dashboard_formContainer__E7yeN",formGroup:"Dashboard_formGroup__MUlGz",formInput:"Dashboard_formInput__teeW5",formSelect:"Dashboard_formSelect__SX1sM",formError:"Dashboard_formError__hDGfH"}}},function(e){e.O(0,[664,379,774,888,179],function(){return e(e.s=2962)}),_N_E=e.O()}]);