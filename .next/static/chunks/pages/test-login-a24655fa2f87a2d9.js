(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[211],{7:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/test-login",function(){return t(3530)}])},3530:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return TestLogin}});var n=t(5893),o=t(7294),s=t(9008),i=t.n(s);function TestLogin(){let[e,r]=(0,o.useState)(""),[t,s]=(0,o.useState)(""),[a,d]=(0,o.useState)(null),[l,c]=(0,o.useState)(""),[u,m]=(0,o.useState)(!1),handleSubmit=async r=>{r.preventDefault(),m(!0),c(""),d(null);try{let r;let n=await fetch("/api/test-db"),o=await n.json();if(console.log("DB Test result:",o),!o.success)throw Error("Database connection failed: "+o.message);let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),i=await s.text();console.log("Raw login response:",i);try{r=JSON.parse(i)}catch(e){c("Received non-JSON response: ".concat(i.substring(0,100),"..."));return}if(!s.ok)throw Error(r.message||"Login failed with status: ".concat(s.status));d(r)}catch(e){console.error("Login test error:",e),c(e.message||"An unexpected error occurred")}finally{m(!1)}};return(0,n.jsxs)("div",{style:{padding:"2rem",maxWidth:"600px",margin:"0 auto"},children:[(0,n.jsx)(i(),{children:(0,n.jsx)("title",{children:"Login Test"})}),(0,n.jsx)("h1",{children:"Login Test Page"}),(0,n.jsxs)("form",{onSubmit:handleSubmit,style:{marginBottom:"2rem"},children:[(0,n.jsx)("div",{style:{marginBottom:"1rem"},children:(0,n.jsxs)("label",{style:{display:"block",marginBottom:"0.5rem"},children:["Email:",(0,n.jsx)("input",{type:"email",value:e,onChange:e=>r(e.target.value),required:!0,style:{display:"block",width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #ccc",borderRadius:"0.25rem"}})]})}),(0,n.jsx)("div",{style:{marginBottom:"1.5rem"},children:(0,n.jsxs)("label",{style:{display:"block",marginBottom:"0.5rem"},children:["Password:",(0,n.jsx)("input",{type:"password",value:t,onChange:e=>s(e.target.value),required:!0,style:{display:"block",width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #ccc",borderRadius:"0.25rem"}})]})}),(0,n.jsx)("button",{type:"submit",disabled:u,style:{background:"#4f46e5",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"0.25rem",cursor:u?"not-allowed":"pointer",opacity:u?.7:1},children:u?"Testing...":"Test Login"})]}),l&&(0,n.jsxs)("div",{style:{padding:"1rem",background:"#fee2e2",border:"1px solid #f87171",borderRadius:"0.25rem",color:"#b91c1c",marginBottom:"1.5rem"},children:[(0,n.jsx)("strong",{children:"Error:"})," ",l]}),a&&(0,n.jsxs)("div",{style:{padding:"1rem",background:"#ecfdf5",border:"1px solid #10b981",borderRadius:"0.25rem",color:"#065f46",marginBottom:"1.5rem"},children:[(0,n.jsx)("strong",{children:"Success:"})," Login successful!",(0,n.jsx)("pre",{style:{marginTop:"1rem",padding:"1rem",background:"#f1f5f9",borderRadius:"0.25rem",overflow:"auto"},children:JSON.stringify(a,null,2)})]})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=7)}),_N_E=e.O()}]);