(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{6659:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/register",function(){return n(7933)}])},7933:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return Register}});var r=n(5893),t=n(7294),s=n(1163),i=n(9008),l=n.n(i),o=n(1664),h=n.n(o),d=n(3806),c=n.n(d);function Register(){let e=(0,s.useRouter)(),[a,n]=(0,t.useState)({name:"",email:"",password:"",confirmPassword:"",role:"patient",phoneNumber:"",dateOfBirth:"",gender:"",specialization:"",license:"",yearsOfExperience:"",hospital:"",department:""}),[i,o]=(0,t.useState)(""),[d,m]=(0,t.useState)(!1),handleChange=e=>{let{name:a,value:r}=e.target;n(e=>({...e,[a]:r}))},handleSubmit=async n=>{if(n.preventDefault(),o(""),a.password!==a.confirmPassword){o("Passwords do not match");return}if("doctor"===a.role&&(!a.specialization||!a.license||!a.yearsOfExperience)){o("Please fill in all required doctor fields");return}if(a.dateOfBirth){let e=new Date(a.dateOfBirth),n=new Date,r=n.getFullYear()-e.getFullYear(),t=n.getMonth()-e.getMonth();if((t<0||0===t&&n.getDate()<e.getDate())&&r--,r<18){o("You must be at least 18 years old to register");return}}m(!0);try{let n=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),r=await n.json();if(!n.ok)throw Error(r.message||"Registration failed");localStorage.setItem("token",r.token),e.push("/dashboard")}catch(e){o(e.message)}finally{m(!1)}};return(0,r.jsxs)("div",{className:c().container,children:[(0,r.jsxs)(l(),{children:[(0,r.jsx)("title",{children:"Register - Digital Healthcare Platform"}),(0,r.jsx)("meta",{name:"description",content:"Create a new account"})]}),(0,r.jsx)("main",{className:c().main,children:(0,r.jsxs)("div",{className:c().formContainer,children:[(0,r.jsx)("h1",{className:c().title,children:"Create Account"}),i&&(0,r.jsx)("div",{className:c().error,children:i}),(0,r.jsxs)("form",{onSubmit:handleSubmit,className:c().form,children:[(0,r.jsxs)("div",{className:c().formGroup,children:[(0,r.jsx)("label",{htmlFor:"name",children:"Full Name"}),(0,r.jsx)("input",{type:"text",id:"name",name:"name",value:a.name,onChange:handleChange,required:!0,className:c().input})]}),(0,r.jsxs)("div",{className:c().formGroup,children:[(0,r.jsx)("label",{htmlFor:"email",children:"Email"}),(0,r.jsx)("input",{type:"email",id:"email",name:"email",value:a.email,onChange:handleChange,required:!0,className:c().input})]}),(0,r.jsxs)("div",{className:c().formGroup,children:[(0,r.jsx)("label",{htmlFor:"password",children:"Password"}),(0,r.jsx)("input",{type:"password",id:"password",name:"password",value:a.password,onChange:handleChange,required:!0,className:c().input})]}),(0,r.jsxs)("div",{className:c().formGroup,children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,r.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:a.confirmPassword,onChange:handleChange,required:!0,className:c().input})]}),(0,r.jsxs)("div",{className:c().formGroup,children:[(0,r.jsx)("label",{htmlFor:"role",children:"I am a"}),(0,r.jsxs)("select",{id:"role",name:"role",value:a.role,onChange:handleChange,required:!0,className:c().input,children:[(0,r.jsx)("option",{value:"patient",children:"Patient"}),(0,r.jsx)("option",{value:"doctor",children:"Doctor"})]})]}),(0,r.jsxs)("div",{className:c().formGroup,children:[(0,r.jsx)("label",{htmlFor:"phoneNumber",children:"Phone Number"}),(0,r.jsx)("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:a.phoneNumber,onChange:handleChange,className:c().input})]}),(0,r.jsxs)("div",{className:c().formGroup,children:[(0,r.jsx)("label",{htmlFor:"dateOfBirth",children:"Date of Birth"}),(0,r.jsx)("input",{type:"date",id:"dateOfBirth",name:"dateOfBirth",value:a.dateOfBirth,onChange:handleChange,className:c().input})]}),(0,r.jsxs)("div",{className:c().formGroup,children:[(0,r.jsx)("label",{htmlFor:"gender",children:"Gender"}),(0,r.jsxs)("select",{id:"gender",name:"gender",value:a.gender,onChange:handleChange,className:c().input,children:[(0,r.jsx)("option",{value:"",children:"Prefer not to say"}),(0,r.jsx)("option",{value:"male",children:"Male"}),(0,r.jsx)("option",{value:"female",children:"Female"}),(0,r.jsx)("option",{value:"other",children:"Other"})]})]}),"doctor"===a.role&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:c().formGroup,children:[(0,r.jsx)("label",{htmlFor:"specialization",children:"Specialization *"}),(0,r.jsx)("input",{type:"text",id:"specialization",name:"specialization",value:a.specialization,onChange:handleChange,required:!0,className:c().input})]}),(0,r.jsxs)("div",{className:c().formGroup,children:[(0,r.jsx)("label",{htmlFor:"license",children:"Medical License Number *"}),(0,r.jsx)("input",{type:"text",id:"license",name:"license",value:a.license,onChange:handleChange,required:!0,className:c().input})]}),(0,r.jsxs)("div",{className:c().formGroup,children:[(0,r.jsx)("label",{htmlFor:"yearsOfExperience",children:"Years of Experience *"}),(0,r.jsx)("input",{type:"number",id:"yearsOfExperience",name:"yearsOfExperience",value:a.yearsOfExperience,onChange:handleChange,required:!0,min:"0",className:c().input})]}),(0,r.jsxs)("div",{className:c().formGroup,children:[(0,r.jsx)("label",{htmlFor:"hospital",children:"Hospital/Clinic"}),(0,r.jsx)("input",{type:"text",id:"hospital",name:"hospital",value:a.hospital,onChange:handleChange,className:c().input})]}),(0,r.jsxs)("div",{className:c().formGroup,children:[(0,r.jsx)("label",{htmlFor:"department",children:"Department"}),(0,r.jsx)("input",{type:"text",id:"department",name:"department",value:a.department,onChange:handleChange,className:c().input})]})]}),(0,r.jsx)("button",{type:"submit",className:c().button,disabled:d,children:d?"Creating Account...":"Create Account"})]}),(0,r.jsxs)("p",{className:c().switch,children:["Already have an account?"," ",(0,r.jsx)(h(),{href:"/auth/login",className:c().link,children:"Login here"})]})]})})]})}},3806:function(e){e.exports={container:"Auth_container__E0cyZ",main:"Auth_main__5vxx4",formContainer:"Auth_formContainer__yRGg1",title:"Auth_title__XYQC0",form:"Auth_form__OqwXa",formGroup:"Auth_formGroup__gjHl_",input:"Auth_input__dzbho",button:"Auth_button__4WTkn",error:"Auth_error__tYrBg",switch:"Auth_switch__g6lY9",link:"Auth_link__ba9lj"}}},function(e){e.O(0,[664,774,888,179],function(){return e(e.s=6659)}),_N_E=e.O()}]);