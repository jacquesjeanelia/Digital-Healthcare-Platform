"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/appointments";
exports.ids = ["pages/api/appointments"];
exports.modules = {

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fappointments&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cappointments%5Cindex.ts&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fappointments&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cappointments%5Cindex.ts&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_appointments_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\appointments\\index.ts */ \"(api)/./src/pages/api/appointments/index.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_appointments_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_appointments_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/appointments\",\n        pathname: \"/api/appointments\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_appointments_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFwcG9pbnRtZW50cyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnNyYyU1Q3BhZ2VzJTVDYXBpJTVDYXBwb2ludG1lbnRzJTVDaW5kZXgudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDc0U7QUFDdEU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLGlFQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxpRUFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kaWdpdGFsLWhlYWx0aGNhcmUtcGxhdGZvcm0vP2NiNzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3NyY1xcXFxwYWdlc1xcXFxhcGlcXFxcYXBwb2ludG1lbnRzXFxcXGluZGV4LnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXBwb2ludG1lbnRzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXBwb2ludG1lbnRzXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fappointments&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cappointments%5Cindex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/models/AppointmentModel.ts":
/*!****************************************!*\
  !*** ./src/models/AppointmentModel.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst appointmentSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    patientId: {\n        type: String,\n        ref: \"User\",\n        required: true\n    },\n    doctorId: {\n        type: String,\n        ref: \"User\",\n        required: true\n    },\n    dateTime: {\n        type: Date,\n        required: true\n    },\n    duration: {\n        type: Number,\n        required: true\n    },\n    status: {\n        type: String,\n        required: true,\n        enum: [\n            \"scheduled\",\n            \"confirmed\",\n            \"in-progress\",\n            \"completed\",\n            \"cancelled\",\n            \"no-show\"\n        ]\n    },\n    type: {\n        type: String,\n        required: true,\n        enum: [\n            \"general-checkup\",\n            \"follow-up\",\n            \"consultation\",\n            \"emergency\",\n            \"vaccination\",\n            \"telemedicine\"\n        ]\n    },\n    notes: String,\n    symptoms: [\n        {\n            type: String\n        }\n    ],\n    reasonForVisit: {\n        type: String,\n        required: true\n    },\n    virtualMeetingLink: String,\n    location: String\n}, {\n    timestamps: true\n});\n// Add indexes for better query performance\nappointmentSchema.index({\n    patientId: 1,\n    dateTime: 1\n});\nappointmentSchema.index({\n    doctorId: 1,\n    dateTime: 1\n});\nappointmentSchema.index({\n    status: 1,\n    dateTime: 1\n});\n// Check if model already exists to prevent OverwriteModelError\nconst AppointmentModel = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Appointment || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Appointment\", appointmentSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AppointmentModel);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbW9kZWxzL0FwcG9pbnRtZW50TW9kZWwudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXNEO0FBS3RELE1BQU1FLG9CQUFvQixJQUFJRCw0Q0FBTUEsQ0FBZTtJQUNqREUsV0FBVztRQUFFQyxNQUFNQztRQUFRQyxLQUFLO1FBQVFDLFVBQVU7SUFBSztJQUN2REMsVUFBVTtRQUFFSixNQUFNQztRQUFRQyxLQUFLO1FBQVFDLFVBQVU7SUFBSztJQUN0REUsVUFBVTtRQUFFTCxNQUFNTTtRQUFNSCxVQUFVO0lBQUs7SUFDdkNJLFVBQVU7UUFBRVAsTUFBTVE7UUFBUUwsVUFBVTtJQUFLO0lBQ3pDTSxRQUFRO1FBQ05ULE1BQU1DO1FBQ05FLFVBQVU7UUFDVk8sTUFBTTtZQUFDO1lBQWE7WUFBYTtZQUFlO1lBQWE7WUFBYTtTQUFVO0lBQ3RGO0lBQ0FWLE1BQU07UUFDSkEsTUFBTUM7UUFDTkUsVUFBVTtRQUNWTyxNQUFNO1lBQUM7WUFBbUI7WUFBYTtZQUFnQjtZQUFhO1lBQWU7U0FBZTtJQUNwRztJQUNBQyxPQUFPVjtJQUNQVyxVQUFVO1FBQUM7WUFBRVosTUFBTUM7UUFBTztLQUFFO0lBQzVCWSxnQkFBZ0I7UUFBRWIsTUFBTUM7UUFBUUUsVUFBVTtJQUFLO0lBQy9DVyxvQkFBb0JiO0lBQ3BCYyxVQUFVZDtBQUNaLEdBQUc7SUFBRWUsWUFBWTtBQUFLO0FBRXRCLDJDQUEyQztBQUMzQ2xCLGtCQUFrQm1CLEtBQUssQ0FBQztJQUFFbEIsV0FBVztJQUFHTSxVQUFVO0FBQUU7QUFDcERQLGtCQUFrQm1CLEtBQUssQ0FBQztJQUFFYixVQUFVO0lBQUdDLFVBQVU7QUFBRTtBQUNuRFAsa0JBQWtCbUIsS0FBSyxDQUFDO0lBQUVSLFFBQVE7SUFBR0osVUFBVTtBQUFFO0FBRWpELCtEQUErRDtBQUMvRCxNQUFNYSxtQkFBbUJ0Qix3REFBZSxDQUFDd0IsV0FBVyxJQUFJeEIscURBQWMsQ0FBZSxlQUFlRTtBQUVwRyxpRUFBZW9CLGdCQUFnQkEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2RpZ2l0YWwtaGVhbHRoY2FyZS1wbGF0Zm9ybS8uL3NyYy9tb2RlbHMvQXBwb2ludG1lbnRNb2RlbC50cz8xNTUyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSwgeyBTY2hlbWEsIERvY3VtZW50IH0gZnJvbSAnbW9uZ29vc2UnO1xyXG5pbXBvcnQgeyBBcHBvaW50bWVudCB9IGZyb20gJy4vQXBwb2ludG1lbnQnO1xyXG5cclxuaW50ZXJmYWNlIElBcHBvaW50bWVudCBleHRlbmRzIE9taXQ8QXBwb2ludG1lbnQsICdpZCc+LCBEb2N1bWVudCB7fVxyXG5cclxuY29uc3QgYXBwb2ludG1lbnRTY2hlbWEgPSBuZXcgU2NoZW1hPElBcHBvaW50bWVudD4oe1xyXG4gIHBhdGllbnRJZDogeyB0eXBlOiBTdHJpbmcsIHJlZjogJ1VzZXInLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gIGRvY3RvcklkOiB7IHR5cGU6IFN0cmluZywgcmVmOiAnVXNlcicsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgZGF0ZVRpbWU6IHsgdHlwZTogRGF0ZSwgcmVxdWlyZWQ6IHRydWUgfSxcclxuICBkdXJhdGlvbjogeyB0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlIH0sIC8vIEluIG1pbnV0ZXNcclxuICBzdGF0dXM6IHsgXHJcbiAgICB0eXBlOiBTdHJpbmcsIFxyXG4gICAgcmVxdWlyZWQ6IHRydWUsIFxyXG4gICAgZW51bTogWydzY2hlZHVsZWQnLCAnY29uZmlybWVkJywgJ2luLXByb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdjYW5jZWxsZWQnLCAnbm8tc2hvdyddIFxyXG4gIH0sXHJcbiAgdHlwZTogeyBcclxuICAgIHR5cGU6IFN0cmluZywgXHJcbiAgICByZXF1aXJlZDogdHJ1ZSwgXHJcbiAgICBlbnVtOiBbJ2dlbmVyYWwtY2hlY2t1cCcsICdmb2xsb3ctdXAnLCAnY29uc3VsdGF0aW9uJywgJ2VtZXJnZW5jeScsICd2YWNjaW5hdGlvbicsICd0ZWxlbWVkaWNpbmUnXSBcclxuICB9LFxyXG4gIG5vdGVzOiBTdHJpbmcsXHJcbiAgc3ltcHRvbXM6IFt7IHR5cGU6IFN0cmluZyB9XSxcclxuICByZWFzb25Gb3JWaXNpdDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgdmlydHVhbE1lZXRpbmdMaW5rOiBTdHJpbmcsXHJcbiAgbG9jYXRpb246IFN0cmluZyxcclxufSwgeyB0aW1lc3RhbXBzOiB0cnVlIH0pO1xyXG5cclxuLy8gQWRkIGluZGV4ZXMgZm9yIGJldHRlciBxdWVyeSBwZXJmb3JtYW5jZVxyXG5hcHBvaW50bWVudFNjaGVtYS5pbmRleCh7IHBhdGllbnRJZDogMSwgZGF0ZVRpbWU6IDEgfSk7XHJcbmFwcG9pbnRtZW50U2NoZW1hLmluZGV4KHsgZG9jdG9ySWQ6IDEsIGRhdGVUaW1lOiAxIH0pO1xyXG5hcHBvaW50bWVudFNjaGVtYS5pbmRleCh7IHN0YXR1czogMSwgZGF0ZVRpbWU6IDEgfSk7XHJcblxyXG4vLyBDaGVjayBpZiBtb2RlbCBhbHJlYWR5IGV4aXN0cyB0byBwcmV2ZW50IE92ZXJ3cml0ZU1vZGVsRXJyb3JcclxuY29uc3QgQXBwb2ludG1lbnRNb2RlbCA9IG1vbmdvb3NlLm1vZGVscy5BcHBvaW50bWVudCB8fCBtb25nb29zZS5tb2RlbDxJQXBwb2ludG1lbnQ+KCdBcHBvaW50bWVudCcsIGFwcG9pbnRtZW50U2NoZW1hKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFwcG9pbnRtZW50TW9kZWw7ICJdLCJuYW1lcyI6WyJtb25nb29zZSIsIlNjaGVtYSIsImFwcG9pbnRtZW50U2NoZW1hIiwicGF0aWVudElkIiwidHlwZSIsIlN0cmluZyIsInJlZiIsInJlcXVpcmVkIiwiZG9jdG9ySWQiLCJkYXRlVGltZSIsIkRhdGUiLCJkdXJhdGlvbiIsIk51bWJlciIsInN0YXR1cyIsImVudW0iLCJub3RlcyIsInN5bXB0b21zIiwicmVhc29uRm9yVmlzaXQiLCJ2aXJ0dWFsTWVldGluZ0xpbmsiLCJsb2NhdGlvbiIsInRpbWVzdGFtcHMiLCJpbmRleCIsIkFwcG9pbnRtZW50TW9kZWwiLCJtb2RlbHMiLCJBcHBvaW50bWVudCIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/models/AppointmentModel.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/appointments/index.ts":
/*!*********************************************!*\
  !*** ./src/pages/api/appointments/index.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _utils_mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/utils/mongodb */ \"(api)/./src/utils/mongodb.ts\");\n/* harmony import */ var _models_AppointmentModel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/models/AppointmentModel */ \"(api)/./src/models/AppointmentModel.ts\");\n/* harmony import */ var _utils_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/utils/auth */ \"(api)/./src/utils/auth.ts\");\n\n\n\nasync function handler(req, res) {\n    try {\n        // Connect to MongoDB\n        await (0,_utils_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        // Check authentication for all routes\n        const user = await (0,_utils_auth__WEBPACK_IMPORTED_MODULE_2__.verifyToken)(req, res);\n        if (!user) return; // Response is already sent in verifyToken\n        // Route handlers based on HTTP method\n        switch(req.method){\n            case \"GET\":\n                return await getAppointments(req, res, user);\n            case \"POST\":\n                return await createAppointment(req, res, user);\n            case \"PUT\":\n                return await updateAppointment(req, res, user);\n            case \"DELETE\":\n                return await deleteAppointment(req, res, user);\n            default:\n                return res.status(405).json({\n                    message: \"Method not allowed\"\n                });\n        }\n    } catch (error) {\n        console.error(\"Appointment API error:\", error);\n        return res.status(500).json({\n            message: \"Server error\",\n            error: error.message\n        });\n    }\n}\n// Get appointments with filtering\nasync function getAppointments(req, res, user) {\n    const { userId, role } = user;\n    const { startDate, endDate, status } = req.query;\n    // Build query based on user role and filters\n    let query = {};\n    // Restrict patients to only see their own appointments\n    if (role === \"patient\") {\n        query.patientId = userId;\n    } else if (role === \"doctor\") {\n        query.doctorId = userId;\n    }\n    // Apply date range filter if provided\n    if (startDate && endDate) {\n        query.dateTime = {\n            $gte: new Date(startDate),\n            $lte: new Date(endDate)\n        };\n    }\n    // Apply status filter if provided\n    if (status) {\n        query.status = status;\n    }\n    // Fetch appointments\n    const appointments = await _models_AppointmentModel__WEBPACK_IMPORTED_MODULE_1__[\"default\"].find(query).sort({\n        dateTime: 1\n    }).lean();\n    return res.status(200).json({\n        appointments\n    });\n}\n// Create new appointment\nasync function createAppointment(req, res, user) {\n    const { role } = user;\n    const { patientId, doctorId, dateTime, duration, type, reasonForVisit, symptoms, virtualMeetingLink, location } = req.body;\n    // Validate required fields\n    if (!patientId || !doctorId || !dateTime || !duration || !type) {\n        return res.status(400).json({\n            message: \"Missing required fields\"\n        });\n    }\n    // Make sure patients can only create appointments for themselves\n    if (role === \"patient\" && patientId !== user.userId) {\n        return res.status(403).json({\n            message: \"Patients can only create appointments for themselves\"\n        });\n    }\n    // Create the appointment\n    const appointment = await _models_AppointmentModel__WEBPACK_IMPORTED_MODULE_1__[\"default\"].create({\n        patientId,\n        doctorId,\n        dateTime: new Date(dateTime),\n        duration,\n        status: \"scheduled\",\n        type,\n        reasonForVisit,\n        symptoms,\n        virtualMeetingLink,\n        location,\n        createdAt: new Date(),\n        updatedAt: new Date()\n    });\n    return res.status(201).json({\n        appointment\n    });\n}\n// Update appointment\nasync function updateAppointment(req, res, user) {\n    const { role } = user;\n    const { id } = req.query;\n    const updateData = req.body;\n    // Validate appointment ID\n    if (!id) {\n        return res.status(400).json({\n            message: \"Appointment ID is required\"\n        });\n    }\n    // Find existing appointment\n    const appointment = await _models_AppointmentModel__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findById(id);\n    if (!appointment) {\n        return res.status(404).json({\n            message: \"Appointment not found\"\n        });\n    }\n    // Check permissions - patients can only modify their own appointments\n    if (role === \"patient\" && appointment.patientId.toString() !== user.userId) {\n        return res.status(403).json({\n            message: \"You can only update your own appointments\"\n        });\n    }\n    // Check permissions - doctors can only modify their own appointments\n    if (role === \"doctor\" && appointment.doctorId.toString() !== user.userId) {\n        return res.status(403).json({\n            message: \"You can only update your own appointments\"\n        });\n    }\n    // Update the appointment\n    updateData.updatedAt = new Date();\n    const updatedAppointment = await _models_AppointmentModel__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findByIdAndUpdate(id, updateData, {\n        new: true\n    });\n    return res.status(200).json({\n        appointment: updatedAppointment\n    });\n}\n// Delete appointment\nasync function deleteAppointment(req, res, user) {\n    const { role } = user;\n    const { id } = req.query;\n    // Validate appointment ID\n    if (!id) {\n        return res.status(400).json({\n            message: \"Appointment ID is required\"\n        });\n    }\n    // Find existing appointment\n    const appointment = await _models_AppointmentModel__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findById(id);\n    if (!appointment) {\n        return res.status(404).json({\n            message: \"Appointment not found\"\n        });\n    }\n    // Check permissions - only allow deletion of own appointments\n    if (role === \"patient\" && appointment.patientId.toString() !== user.userId) {\n        return res.status(403).json({\n            message: \"You can only delete your own appointments\"\n        });\n    }\n    if (role === \"doctor\" && appointment.doctorId.toString() !== user.userId) {\n        return res.status(403).json({\n            message: \"You can only delete your own appointments\"\n        });\n    }\n    // Delete the appointment\n    await _models_AppointmentModel__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findByIdAndDelete(id);\n    return res.status(200).json({\n        message: \"Appointment deleted successfully\"\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2FwcG9pbnRtZW50cy9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ3dDO0FBQ2lCO0FBQ2Q7QUFFNUIsZUFBZUcsUUFBUUMsR0FBbUIsRUFBRUMsR0FBb0I7SUFDN0UsSUFBSTtRQUNGLHFCQUFxQjtRQUNyQixNQUFNTCwwREFBU0E7UUFFZixzQ0FBc0M7UUFDdEMsTUFBTU0sT0FBTyxNQUFNSix3REFBV0EsQ0FBQ0UsS0FBS0M7UUFDcEMsSUFBSSxDQUFDQyxNQUFNLFFBQVEsMENBQTBDO1FBRTdELHNDQUFzQztRQUN0QyxPQUFRRixJQUFJRyxNQUFNO1lBQ2hCLEtBQUs7Z0JBQ0gsT0FBTyxNQUFNQyxnQkFBZ0JKLEtBQUtDLEtBQUtDO1lBQ3pDLEtBQUs7Z0JBQ0gsT0FBTyxNQUFNRyxrQkFBa0JMLEtBQUtDLEtBQUtDO1lBQzNDLEtBQUs7Z0JBQ0gsT0FBTyxNQUFNSSxrQkFBa0JOLEtBQUtDLEtBQUtDO1lBQzNDLEtBQUs7Z0JBQ0gsT0FBTyxNQUFNSyxrQkFBa0JQLEtBQUtDLEtBQUtDO1lBQzNDO2dCQUNFLE9BQU9ELElBQUlPLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQUVDLFNBQVM7Z0JBQXFCO1FBQ2hFO0lBQ0YsRUFBRSxPQUFPQyxPQUFZO1FBQ25CQyxRQUFRRCxLQUFLLENBQUMsMEJBQTBCQTtRQUN4QyxPQUFPVixJQUFJTyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLFNBQVM7WUFBZ0JDLE9BQU9BLE1BQU1ELE9BQU87UUFBQztJQUM5RTtBQUNGO0FBRUEsa0NBQWtDO0FBQ2xDLGVBQWVOLGdCQUFnQkosR0FBbUIsRUFBRUMsR0FBb0IsRUFBRUMsSUFBUztJQUNqRixNQUFNLEVBQUVXLE1BQU0sRUFBRUMsSUFBSSxFQUFFLEdBQUdaO0lBQ3pCLE1BQU0sRUFBRWEsU0FBUyxFQUFFQyxPQUFPLEVBQUVSLE1BQU0sRUFBRSxHQUFHUixJQUFJaUIsS0FBSztJQUVoRCw2Q0FB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T3hDLEtBQUtXLE1BQU0sRUFBRTtRQUN4RSxPQUFPWixJQUFJTyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLFNBQVM7UUFBNEM7SUFDckY7SUFFQSx5QkFBeUI7SUFDekIsTUFBTWIsa0ZBQWtDLENBQUMwQztJQUV6QyxPQUFPdEMsSUFBSU8sTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztRQUFFQyxTQUFTO0lBQW1DO0FBQzVFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGlnaXRhbC1oZWFsdGhjYXJlLXBsYXRmb3JtLy4vc3JjL3BhZ2VzL2FwaS9hcHBvaW50bWVudHMvaW5kZXgudHM/ODRiYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcbmltcG9ydCBjb25uZWN0REIgZnJvbSAnQC91dGlscy9tb25nb2RiJztcclxuaW1wb3J0IEFwcG9pbnRtZW50TW9kZWwgZnJvbSAnQC9tb2RlbHMvQXBwb2ludG1lbnRNb2RlbCc7XHJcbmltcG9ydCB7IHZlcmlmeVRva2VuIH0gZnJvbSAnQC91dGlscy9hdXRoJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcclxuICB0cnkge1xyXG4gICAgLy8gQ29ubmVjdCB0byBNb25nb0RCXHJcbiAgICBhd2FpdCBjb25uZWN0REIoKTtcclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgYXV0aGVudGljYXRpb24gZm9yIGFsbCByb3V0ZXNcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB2ZXJpZnlUb2tlbihyZXEsIHJlcyk7XHJcbiAgICBpZiAoIXVzZXIpIHJldHVybjsgLy8gUmVzcG9uc2UgaXMgYWxyZWFkeSBzZW50IGluIHZlcmlmeVRva2VuXHJcbiAgICBcclxuICAgIC8vIFJvdXRlIGhhbmRsZXJzIGJhc2VkIG9uIEhUVFAgbWV0aG9kXHJcbiAgICBzd2l0Y2ggKHJlcS5tZXRob2QpIHtcclxuICAgICAgY2FzZSAnR0VUJzpcclxuICAgICAgICByZXR1cm4gYXdhaXQgZ2V0QXBwb2ludG1lbnRzKHJlcSwgcmVzLCB1c2VyKTtcclxuICAgICAgY2FzZSAnUE9TVCc6XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNyZWF0ZUFwcG9pbnRtZW50KHJlcSwgcmVzLCB1c2VyKTtcclxuICAgICAgY2FzZSAnUFVUJzpcclxuICAgICAgICByZXR1cm4gYXdhaXQgdXBkYXRlQXBwb2ludG1lbnQocmVxLCByZXMsIHVzZXIpO1xyXG4gICAgICBjYXNlICdERUxFVEUnOlxyXG4gICAgICAgIHJldHVybiBhd2FpdCBkZWxldGVBcHBvaW50bWVudChyZXEsIHJlcywgdXNlcik7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgbWVzc2FnZTogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcignQXBwb2ludG1lbnQgQVBJIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdTZXJ2ZXIgZXJyb3InLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcclxuICB9XHJcbn1cclxuXHJcbi8vIEdldCBhcHBvaW50bWVudHMgd2l0aCBmaWx0ZXJpbmdcclxuYXN5bmMgZnVuY3Rpb24gZ2V0QXBwb2ludG1lbnRzKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlLCB1c2VyOiBhbnkpIHtcclxuICBjb25zdCB7IHVzZXJJZCwgcm9sZSB9ID0gdXNlcjtcclxuICBjb25zdCB7IHN0YXJ0RGF0ZSwgZW5kRGF0ZSwgc3RhdHVzIH0gPSByZXEucXVlcnk7XHJcbiAgXHJcbiAgLy8gQnVpbGQgcXVlcnkgYmFzZWQgb24gdXNlciByb2xlIGFuZCBmaWx0ZXJzXHJcbiAgbGV0IHF1ZXJ5OiBhbnkgPSB7fTtcclxuICBcclxuICAvLyBSZXN0cmljdCBwYXRpZW50cyB0byBvbmx5IHNlZSB0aGVpciBvd24gYXBwb2ludG1lbnRzXHJcbiAgaWYgKHJvbGUgPT09ICdwYXRpZW50Jykge1xyXG4gICAgcXVlcnkucGF0aWVudElkID0gdXNlcklkO1xyXG4gIH0gXHJcbiAgLy8gRG9jdG9ycyBjYW4gb25seSBzZWUgdGhlaXIgb3duIGFwcG9pbnRtZW50c1xyXG4gIGVsc2UgaWYgKHJvbGUgPT09ICdkb2N0b3InKSB7XHJcbiAgICBxdWVyeS5kb2N0b3JJZCA9IHVzZXJJZDtcclxuICB9XHJcbiAgXHJcbiAgLy8gQXBwbHkgZGF0ZSByYW5nZSBmaWx0ZXIgaWYgcHJvdmlkZWRcclxuICBpZiAoc3RhcnREYXRlICYmIGVuZERhdGUpIHtcclxuICAgIHF1ZXJ5LmRhdGVUaW1lID0ge1xyXG4gICAgICAkZ3RlOiBuZXcgRGF0ZShzdGFydERhdGUgYXMgc3RyaW5nKSxcclxuICAgICAgJGx0ZTogbmV3IERhdGUoZW5kRGF0ZSBhcyBzdHJpbmcpXHJcbiAgICB9O1xyXG4gIH1cclxuICBcclxuICAvLyBBcHBseSBzdGF0dXMgZmlsdGVyIGlmIHByb3ZpZGVkXHJcbiAgaWYgKHN0YXR1cykge1xyXG4gICAgcXVlcnkuc3RhdHVzID0gc3RhdHVzO1xyXG4gIH1cclxuICBcclxuICAvLyBGZXRjaCBhcHBvaW50bWVudHNcclxuICBjb25zdCBhcHBvaW50bWVudHMgPSBhd2FpdCBBcHBvaW50bWVudE1vZGVsLmZpbmQocXVlcnkpXHJcbiAgICAuc29ydCh7IGRhdGVUaW1lOiAxIH0pXHJcbiAgICAubGVhbigpO1xyXG4gIFxyXG4gIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IGFwcG9pbnRtZW50cyB9KTtcclxufVxyXG5cclxuLy8gQ3JlYXRlIG5ldyBhcHBvaW50bWVudFxyXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVBcHBvaW50bWVudChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSwgdXNlcjogYW55KSB7XHJcbiAgY29uc3QgeyByb2xlIH0gPSB1c2VyO1xyXG4gIGNvbnN0IHtcclxuICAgIHBhdGllbnRJZCxcclxuICAgIGRvY3RvcklkLFxyXG4gICAgZGF0ZVRpbWUsXHJcbiAgICBkdXJhdGlvbixcclxuICAgIHR5cGUsXHJcbiAgICByZWFzb25Gb3JWaXNpdCxcclxuICAgIHN5bXB0b21zLFxyXG4gICAgdmlydHVhbE1lZXRpbmdMaW5rLFxyXG4gICAgbG9jYXRpb25cclxuICB9ID0gcmVxLmJvZHk7XHJcbiAgXHJcbiAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXHJcbiAgaWYgKCFwYXRpZW50SWQgfHwgIWRvY3RvcklkIHx8ICFkYXRlVGltZSB8fCAhZHVyYXRpb24gfHwgIXR5cGUpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkcycgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIE1ha2Ugc3VyZSBwYXRpZW50cyBjYW4gb25seSBjcmVhdGUgYXBwb2ludG1lbnRzIGZvciB0aGVtc2VsdmVzXHJcbiAgaWYgKHJvbGUgPT09ICdwYXRpZW50JyAmJiBwYXRpZW50SWQgIT09IHVzZXIudXNlcklkKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlOiAnUGF0aWVudHMgY2FuIG9ubHkgY3JlYXRlIGFwcG9pbnRtZW50cyBmb3IgdGhlbXNlbHZlcycgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIENyZWF0ZSB0aGUgYXBwb2ludG1lbnRcclxuICBjb25zdCBhcHBvaW50bWVudCA9IGF3YWl0IEFwcG9pbnRtZW50TW9kZWwuY3JlYXRlKHtcclxuICAgIHBhdGllbnRJZCxcclxuICAgIGRvY3RvcklkLFxyXG4gICAgZGF0ZVRpbWU6IG5ldyBEYXRlKGRhdGVUaW1lKSxcclxuICAgIGR1cmF0aW9uLFxyXG4gICAgc3RhdHVzOiAnc2NoZWR1bGVkJyxcclxuICAgIHR5cGUsXHJcbiAgICByZWFzb25Gb3JWaXNpdCxcclxuICAgIHN5bXB0b21zLFxyXG4gICAgdmlydHVhbE1lZXRpbmdMaW5rLFxyXG4gICAgbG9jYXRpb24sXHJcbiAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcclxuICB9KTtcclxuICBcclxuICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oeyBhcHBvaW50bWVudCB9KTtcclxufVxyXG5cclxuLy8gVXBkYXRlIGFwcG9pbnRtZW50XHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUFwcG9pbnRtZW50KHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlLCB1c2VyOiBhbnkpIHtcclxuICBjb25zdCB7IHJvbGUgfSA9IHVzZXI7XHJcbiAgY29uc3QgeyBpZCB9ID0gcmVxLnF1ZXJ5O1xyXG4gIGNvbnN0IHVwZGF0ZURhdGEgPSByZXEuYm9keTtcclxuICBcclxuICAvLyBWYWxpZGF0ZSBhcHBvaW50bWVudCBJRFxyXG4gIGlmICghaWQpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdBcHBvaW50bWVudCBJRCBpcyByZXF1aXJlZCcgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIEZpbmQgZXhpc3RpbmcgYXBwb2ludG1lbnRcclxuICBjb25zdCBhcHBvaW50bWVudCA9IGF3YWl0IEFwcG9pbnRtZW50TW9kZWwuZmluZEJ5SWQoaWQpO1xyXG4gIGlmICghYXBwb2ludG1lbnQpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdBcHBvaW50bWVudCBub3QgZm91bmQnIH0pO1xyXG4gIH1cclxuICBcclxuICAvLyBDaGVjayBwZXJtaXNzaW9ucyAtIHBhdGllbnRzIGNhbiBvbmx5IG1vZGlmeSB0aGVpciBvd24gYXBwb2ludG1lbnRzXHJcbiAgaWYgKHJvbGUgPT09ICdwYXRpZW50JyAmJiBhcHBvaW50bWVudC5wYXRpZW50SWQudG9TdHJpbmcoKSAhPT0gdXNlci51c2VySWQpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6ICdZb3UgY2FuIG9ubHkgdXBkYXRlIHlvdXIgb3duIGFwcG9pbnRtZW50cycgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIENoZWNrIHBlcm1pc3Npb25zIC0gZG9jdG9ycyBjYW4gb25seSBtb2RpZnkgdGhlaXIgb3duIGFwcG9pbnRtZW50c1xyXG4gIGlmIChyb2xlID09PSAnZG9jdG9yJyAmJiBhcHBvaW50bWVudC5kb2N0b3JJZC50b1N0cmluZygpICE9PSB1c2VyLnVzZXJJZCkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogJ1lvdSBjYW4gb25seSB1cGRhdGUgeW91ciBvd24gYXBwb2ludG1lbnRzJyB9KTtcclxuICB9XHJcbiAgXHJcbiAgLy8gVXBkYXRlIHRoZSBhcHBvaW50bWVudFxyXG4gIHVwZGF0ZURhdGEudXBkYXRlZEF0ID0gbmV3IERhdGUoKTtcclxuICBjb25zdCB1cGRhdGVkQXBwb2ludG1lbnQgPSBhd2FpdCBBcHBvaW50bWVudE1vZGVsLmZpbmRCeUlkQW5kVXBkYXRlKFxyXG4gICAgaWQsXHJcbiAgICB1cGRhdGVEYXRhLFxyXG4gICAgeyBuZXc6IHRydWUgfVxyXG4gICk7XHJcbiAgXHJcbiAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgYXBwb2ludG1lbnQ6IHVwZGF0ZWRBcHBvaW50bWVudCB9KTtcclxufVxyXG5cclxuLy8gRGVsZXRlIGFwcG9pbnRtZW50XHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFwcG9pbnRtZW50KHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlLCB1c2VyOiBhbnkpIHtcclxuICBjb25zdCB7IHJvbGUgfSA9IHVzZXI7XHJcbiAgY29uc3QgeyBpZCB9ID0gcmVxLnF1ZXJ5O1xyXG4gIFxyXG4gIC8vIFZhbGlkYXRlIGFwcG9pbnRtZW50IElEXHJcbiAgaWYgKCFpZCkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0FwcG9pbnRtZW50IElEIGlzIHJlcXVpcmVkJyB9KTtcclxuICB9XHJcbiAgXHJcbiAgLy8gRmluZCBleGlzdGluZyBhcHBvaW50bWVudFxyXG4gIGNvbnN0IGFwcG9pbnRtZW50ID0gYXdhaXQgQXBwb2ludG1lbnRNb2RlbC5maW5kQnlJZChpZCk7XHJcbiAgaWYgKCFhcHBvaW50bWVudCkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ0FwcG9pbnRtZW50IG5vdCBmb3VuZCcgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIENoZWNrIHBlcm1pc3Npb25zIC0gb25seSBhbGxvdyBkZWxldGlvbiBvZiBvd24gYXBwb2ludG1lbnRzXHJcbiAgaWYgKHJvbGUgPT09ICdwYXRpZW50JyAmJiBhcHBvaW50bWVudC5wYXRpZW50SWQudG9TdHJpbmcoKSAhPT0gdXNlci51c2VySWQpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6ICdZb3UgY2FuIG9ubHkgZGVsZXRlIHlvdXIgb3duIGFwcG9pbnRtZW50cycgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIGlmIChyb2xlID09PSAnZG9jdG9yJyAmJiBhcHBvaW50bWVudC5kb2N0b3JJZC50b1N0cmluZygpICE9PSB1c2VyLnVzZXJJZCkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogJ1lvdSBjYW4gb25seSBkZWxldGUgeW91ciBvd24gYXBwb2ludG1lbnRzJyB9KTtcclxuICB9XHJcbiAgXHJcbiAgLy8gRGVsZXRlIHRoZSBhcHBvaW50bWVudFxyXG4gIGF3YWl0IEFwcG9pbnRtZW50TW9kZWwuZmluZEJ5SWRBbmREZWxldGUoaWQpO1xyXG4gIFxyXG4gIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdBcHBvaW50bWVudCBkZWxldGVkIHN1Y2Nlc3NmdWxseScgfSk7XHJcbn0gIl0sIm5hbWVzIjpbImNvbm5lY3REQiIsIkFwcG9pbnRtZW50TW9kZWwiLCJ2ZXJpZnlUb2tlbiIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJ1c2VyIiwibWV0aG9kIiwiZ2V0QXBwb2ludG1lbnRzIiwiY3JlYXRlQXBwb2ludG1lbnQiLCJ1cGRhdGVBcHBvaW50bWVudCIsImRlbGV0ZUFwcG9pbnRtZW50Iiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJlcnJvciIsImNvbnNvbGUiLCJ1c2VySWQiLCJyb2xlIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsInF1ZXJ5IiwicGF0aWVudElkIiwiZG9jdG9ySWQiLCJkYXRlVGltZSIsIiRndGUiLCJEYXRlIiwiJGx0ZSIsImFwcG9pbnRtZW50cyIsImZpbmQiLCJzb3J0IiwibGVhbiIsImR1cmF0aW9uIiwidHlwZSIsInJlYXNvbkZvclZpc2l0Iiwic3ltcHRvbXMiLCJ2aXJ0dWFsTWVldGluZ0xpbmsiLCJsb2NhdGlvbiIsImJvZHkiLCJhcHBvaW50bWVudCIsImNyZWF0ZSIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsImlkIiwidXBkYXRlRGF0YSIsImZpbmRCeUlkIiwidG9TdHJpbmciLCJ1cGRhdGVkQXBwb2ludG1lbnQiLCJmaW5kQnlJZEFuZFVwZGF0ZSIsIm5ldyIsImZpbmRCeUlkQW5kRGVsZXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/appointments/index.ts\n");

/***/ }),

/***/ "(api)/./src/utils/auth.ts":
/*!***************************!*\
  !*** ./src/utils/auth.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n\nconst verifyToken = (req, res)=>{\n    return new Promise((resolve)=>{\n        // Get token from Authorization header\n        const authHeader = req.headers.authorization;\n        if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n            console.log(\"Auth: Missing or invalid Authorization header\");\n            res.status(401).json({\n                message: \"Unauthorized - Missing or invalid token format\"\n            });\n            return resolve(null);\n        }\n        const token = authHeader.split(\" \")[1];\n        // Check if JWT_SECRET is defined\n        if (!process.env.JWT_SECRET) {\n            console.error(\"Auth: JWT_SECRET environment variable is not defined\");\n            res.status(500).json({\n                message: \"Server configuration error - Missing JWT secret\"\n            });\n            return resolve(null);\n        }\n        // Verify token\n        try {\n            const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, process.env.JWT_SECRET);\n            resolve(decoded);\n        } catch (error) {\n            console.error(\"Auth: JWT verification error\", {\n                error: error.message,\n                name: error.name\n            });\n            if (error.name === \"JsonWebTokenError\") {\n                res.status(401).json({\n                    message: \"Invalid token - \" + error.message\n                });\n            } else if (error.name === \"TokenExpiredError\") {\n                res.status(401).json({\n                    message: \"Expired token\"\n                });\n            } else {\n                res.status(500).json({\n                    message: \"Token verification error\"\n                });\n            }\n            resolve(null);\n        }\n    });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvdXRpbHMvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFDK0I7QUFTeEIsTUFBTUMsY0FBYyxDQUN6QkMsS0FDQUM7SUFFQSxPQUFPLElBQUlDLFFBQVEsQ0FBQ0M7UUFDbEIsc0NBQXNDO1FBQ3RDLE1BQU1DLGFBQWFKLElBQUlLLE9BQU8sQ0FBQ0MsYUFBYTtRQUM1QyxJQUFJLENBQUNGLGNBQWMsQ0FBQ0EsV0FBV0csVUFBVSxDQUFDLFlBQVk7WUFDcERDLFFBQVFDLEdBQUcsQ0FBQztZQUNaUixJQUFJUyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxTQUFTO1lBQWlEO1lBQ2pGLE9BQU9ULFFBQVE7UUFDakI7UUFFQSxNQUFNVSxRQUFRVCxXQUFXVSxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7UUFFdEMsaUNBQWlDO1FBQ2pDLElBQUksQ0FBQ0MsUUFBUUMsR0FBRyxDQUFDQyxVQUFVLEVBQUU7WUFDM0JULFFBQVFVLEtBQUssQ0FBQztZQUNkakIsSUFBSVMsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsU0FBUztZQUFrRDtZQUNsRixPQUFPVCxRQUFRO1FBQ2pCO1FBRUEsZUFBZTtRQUNmLElBQUk7WUFDRixNQUFNZ0IsVUFBVXJCLDBEQUFVLENBQUNlLE9BQU9FLFFBQVFDLEdBQUcsQ0FBQ0MsVUFBVTtZQUN4RGQsUUFBUWdCO1FBQ1YsRUFBRSxPQUFPRCxPQUFZO1lBQ25CVixRQUFRVSxLQUFLLENBQUMsZ0NBQWdDO2dCQUM1Q0EsT0FBT0EsTUFBTU4sT0FBTztnQkFDcEJTLE1BQU1ILE1BQU1HLElBQUk7WUFDbEI7WUFFQSxJQUFJSCxNQUFNRyxJQUFJLEtBQUsscUJBQXFCO2dCQUN0Q3BCLElBQUlTLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQUVDLFNBQVMscUJBQXFCTSxNQUFNTixPQUFPO2dCQUFDO1lBQ3JFLE9BQU8sSUFBSU0sTUFBTUcsSUFBSSxLQUFLLHFCQUFxQjtnQkFDN0NwQixJQUFJUyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO29CQUFFQyxTQUFTO2dCQUFnQjtZQUNsRCxPQUFPO2dCQUNMWCxJQUFJUyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO29CQUFFQyxTQUFTO2dCQUEyQjtZQUM3RDtZQUVBVCxRQUFRO1FBQ1Y7SUFDRjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kaWdpdGFsLWhlYWx0aGNhcmUtcGxhdGZvcm0vLi9zcmMvdXRpbHMvYXV0aC50cz9mZDI5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcclxuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xyXG5cclxuaW50ZXJmYWNlIERlY29kZWRUb2tlbiB7XHJcbiAgdXNlcklkOiBzdHJpbmc7XHJcbiAgcm9sZTogc3RyaW5nO1xyXG4gIGlhdD86IG51bWJlcjtcclxuICBleHA/OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCB2ZXJpZnlUb2tlbiA9IChcclxuICByZXE6IE5leHRBcGlSZXF1ZXN0LCBcclxuICByZXM6IE5leHRBcGlSZXNwb25zZVxyXG4pOiBQcm9taXNlPERlY29kZWRUb2tlbiB8IG51bGw+ID0+IHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgIC8vIEdldCB0b2tlbiBmcm9tIEF1dGhvcml6YXRpb24gaGVhZGVyXHJcbiAgICBjb25zdCBhdXRoSGVhZGVyID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbjtcclxuICAgIGlmICghYXV0aEhlYWRlciB8fCAhYXV0aEhlYWRlci5zdGFydHNXaXRoKCdCZWFyZXIgJykpIHtcclxuICAgICAgY29uc29sZS5sb2coJ0F1dGg6IE1pc3Npbmcgb3IgaW52YWxpZCBBdXRob3JpemF0aW9uIGhlYWRlcicpO1xyXG4gICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQgLSBNaXNzaW5nIG9yIGludmFsaWQgdG9rZW4gZm9ybWF0JyB9KTtcclxuICAgICAgcmV0dXJuIHJlc29sdmUobnVsbCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdG9rZW4gPSBhdXRoSGVhZGVyLnNwbGl0KCcgJylbMV07XHJcbiAgICBcclxuICAgIC8vIENoZWNrIGlmIEpXVF9TRUNSRVQgaXMgZGVmaW5lZFxyXG4gICAgaWYgKCFwcm9jZXNzLmVudi5KV1RfU0VDUkVUKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0F1dGg6IEpXVF9TRUNSRVQgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgbm90IGRlZmluZWQnKTtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnU2VydmVyIGNvbmZpZ3VyYXRpb24gZXJyb3IgLSBNaXNzaW5nIEpXVCBzZWNyZXQnIH0pO1xyXG4gICAgICByZXR1cm4gcmVzb2x2ZShudWxsKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWZXJpZnkgdG9rZW5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUKSBhcyBEZWNvZGVkVG9rZW47XHJcbiAgICAgIHJlc29sdmUoZGVjb2RlZCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0F1dGg6IEpXVCB2ZXJpZmljYXRpb24gZXJyb3InLCB7IFxyXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgICAgIG5hbWU6IGVycm9yLm5hbWVcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0pzb25XZWJUb2tlbkVycm9yJykge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ0ludmFsaWQgdG9rZW4gLSAnICsgZXJyb3IubWVzc2FnZSB9KTtcclxuICAgICAgfSBlbHNlIGlmIChlcnJvci5uYW1lID09PSAnVG9rZW5FeHBpcmVkRXJyb3InKSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnRXhwaXJlZCB0b2tlbicgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnVG9rZW4gdmVyaWZpY2F0aW9uIGVycm9yJyB9KTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmVzb2x2ZShudWxsKTtcclxuICAgIH1cclxuICB9KTtcclxufTsgIl0sIm5hbWVzIjpbImp3dCIsInZlcmlmeVRva2VuIiwicmVxIiwicmVzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJhdXRoSGVhZGVyIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJzdGFydHNXaXRoIiwiY29uc29sZSIsImxvZyIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwidG9rZW4iLCJzcGxpdCIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUIiwiZXJyb3IiLCJkZWNvZGVkIiwidmVyaWZ5IiwibmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/utils/auth.ts\n");

/***/ }),

/***/ "(api)/./src/utils/mongodb.ts":
/*!******************************!*\
  !*** ./src/utils/mongodb.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable inside .env.local\");\n}\nlet cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function connectDB() {\n    if (cached.conn) {\n        console.log(\"Using cached MongoDB connection\");\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        console.log(\"Creating new MongoDB connection...\");\n        const opts = {\n            bufferCommands: false\n        };\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts).then((mongoose)=>{\n            console.log(\"MongoDB connected successfully\");\n            return mongoose;\n        }).catch((error)=>{\n            console.error(\"MongoDB connection error:\", error);\n            throw error;\n        });\n    }\n    try {\n        cached.conn = await cached.promise;\n        console.log(\"MongoDB connection established\");\n    } catch (e) {\n        console.error(\"Error establishing MongoDB connection:\", e);\n        cached.promise = null;\n        throw e;\n    }\n    return cached.conn;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (connectDB);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvdXRpbHMvbW9uZ29kYi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0M7QUFFaEMsTUFBTUMsY0FBY0MsUUFBUUMsR0FBRyxDQUFDRixXQUFXO0FBRTNDLElBQUksQ0FBQ0EsYUFBYTtJQUNoQixNQUFNLElBQUlHLE1BQU07QUFDbEI7QUFXQSxJQUFJQyxTQUFTQyxPQUFPTixRQUFRO0FBRTVCLElBQUksQ0FBQ0ssUUFBUTtJQUNYQSxTQUFTQyxPQUFPTixRQUFRLEdBQUc7UUFBRU8sTUFBTTtRQUFNQyxTQUFTO0lBQUs7QUFDekQ7QUFFQSxlQUFlQztJQUNiLElBQUlKLE9BQU9FLElBQUksRUFBRTtRQUNmRyxRQUFRQyxHQUFHLENBQUM7UUFDWixPQUFPTixPQUFPRSxJQUFJO0lBQ3BCO0lBRUEsSUFBSSxDQUFDRixPQUFPRyxPQUFPLEVBQUU7UUFDbkJFLFFBQVFDLEdBQUcsQ0FBQztRQUNaLE1BQU1DLE9BQU87WUFDWEMsZ0JBQWdCO1FBQ2xCO1FBRUFSLE9BQU9HLE9BQU8sR0FBR1IsdURBQWdCLENBQUNDLGFBQWNXLE1BQzdDRyxJQUFJLENBQUMsQ0FBQ2Y7WUFDTFUsUUFBUUMsR0FBRyxDQUFDO1lBQ1osT0FBT1g7UUFDVCxHQUNDZ0IsS0FBSyxDQUFDLENBQUNDO1lBQ05QLFFBQVFPLEtBQUssQ0FBQyw2QkFBNkJBO1lBQzNDLE1BQU1BO1FBQ1I7SUFDSjtJQUVBLElBQUk7UUFDRlosT0FBT0UsSUFBSSxHQUFHLE1BQU1GLE9BQU9HLE9BQU87UUFDbENFLFFBQVFDLEdBQUcsQ0FBQztJQUNkLEVBQUUsT0FBT08sR0FBRztRQUNWUixRQUFRTyxLQUFLLENBQUMsMENBQTBDQztRQUN4RGIsT0FBT0csT0FBTyxHQUFHO1FBQ2pCLE1BQU1VO0lBQ1I7SUFFQSxPQUFPYixPQUFPRSxJQUFJO0FBQ3BCO0FBRUEsaUVBQWVFLFNBQVNBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kaWdpdGFsLWhlYWx0aGNhcmUtcGxhdGZvcm0vLi9zcmMvdXRpbHMvbW9uZ29kYi50cz9hODI4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XHJcblxyXG5jb25zdCBNT05HT0RCX1VSSSA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJO1xyXG5cclxuaWYgKCFNT05HT0RCX1VSSSkge1xyXG4gIHRocm93IG5ldyBFcnJvcignUGxlYXNlIGRlZmluZSB0aGUgTU9OR09EQl9VUkkgZW52aXJvbm1lbnQgdmFyaWFibGUgaW5zaWRlIC5lbnYubG9jYWwnKTtcclxufVxyXG5cclxuaW50ZXJmYWNlIE1vbmdvb3NlQ2FjaGUge1xyXG4gIGNvbm46IHR5cGVvZiBtb25nb29zZSB8IG51bGw7XHJcbiAgcHJvbWlzZTogUHJvbWlzZTx0eXBlb2YgbW9uZ29vc2U+IHwgbnVsbDtcclxufVxyXG5cclxuZGVjbGFyZSBnbG9iYWwge1xyXG4gIHZhciBtb25nb29zZTogTW9uZ29vc2VDYWNoZTtcclxufVxyXG5cclxubGV0IGNhY2hlZCA9IGdsb2JhbC5tb25nb29zZTtcclxuXHJcbmlmICghY2FjaGVkKSB7XHJcbiAgY2FjaGVkID0gZ2xvYmFsLm1vbmdvb3NlID0geyBjb25uOiBudWxsLCBwcm9taXNlOiBudWxsIH07XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGNvbm5lY3REQigpIHtcclxuICBpZiAoY2FjaGVkLmNvbm4pIHtcclxuICAgIGNvbnNvbGUubG9nKCdVc2luZyBjYWNoZWQgTW9uZ29EQiBjb25uZWN0aW9uJyk7XHJcbiAgICByZXR1cm4gY2FjaGVkLmNvbm47XHJcbiAgfVxyXG5cclxuICBpZiAoIWNhY2hlZC5wcm9taXNlKSB7XHJcbiAgICBjb25zb2xlLmxvZygnQ3JlYXRpbmcgbmV3IE1vbmdvREIgY29ubmVjdGlvbi4uLicpO1xyXG4gICAgY29uc3Qgb3B0cyA9IHtcclxuICAgICAgYnVmZmVyQ29tbWFuZHM6IGZhbHNlLFxyXG4gICAgfTtcclxuXHJcbiAgICBjYWNoZWQucHJvbWlzZSA9IG1vbmdvb3NlLmNvbm5lY3QoTU9OR09EQl9VUkkhLCBvcHRzKVxyXG4gICAgICAudGhlbigobW9uZ29vc2UpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnTW9uZ29EQiBjb25uZWN0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgICAgICAgcmV0dXJuIG1vbmdvb3NlO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignTW9uZ29EQiBjb25uZWN0aW9uIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY2FjaGVkLmNvbm4gPSBhd2FpdCBjYWNoZWQucHJvbWlzZTtcclxuICAgIGNvbnNvbGUubG9nKCdNb25nb0RCIGNvbm5lY3Rpb24gZXN0YWJsaXNoZWQnKTtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBlc3RhYmxpc2hpbmcgTW9uZ29EQiBjb25uZWN0aW9uOicsIGUpO1xyXG4gICAgY2FjaGVkLnByb21pc2UgPSBudWxsO1xyXG4gICAgdGhyb3cgZTtcclxuICB9XHJcblxyXG4gIHJldHVybiBjYWNoZWQuY29ubjtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdERCOyAiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJNT05HT0RCX1VSSSIsInByb2Nlc3MiLCJlbnYiLCJFcnJvciIsImNhY2hlZCIsImdsb2JhbCIsImNvbm4iLCJwcm9taXNlIiwiY29ubmVjdERCIiwiY29uc29sZSIsImxvZyIsIm9wdHMiLCJidWZmZXJDb21tYW5kcyIsImNvbm5lY3QiLCJ0aGVuIiwiY2F0Y2giLCJlcnJvciIsImUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/utils/mongodb.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fappointments&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cappointments%5Cindex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();