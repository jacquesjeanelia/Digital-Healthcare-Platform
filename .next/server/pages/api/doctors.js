"use strict";(()=>{var e={};e.id=663,e.ids=[663],e.modules={1185:e=>{e.exports=require("mongoose")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},9954:(e,t,a)=>{a.r(t),a.d(t,{config:()=>d,default:()=>l,routeModule:()=>c});var r={};a.r(r),a.d(r,{default:()=>handler});var i=a(1802),o=a(7153),s=a(6249),n=a(4149),p=a(5977);async function handler(e,t){if("GET"!==e.method)return t.status(405).json({message:"Method not allowed"});try{await (0,n.Z)();let{specialization:a,hospital:r,department:i,search:o,limit:s="20",page:l="1"}=e.query,d={};a&&(d.specialization=a),r&&(d.hospital=r),i&&(d.department=i),o&&"string"==typeof o&&(d.$or=[{name:{$regex:o,$options:"i"}},{specialization:{$regex:o,$options:"i"}},{hospital:{$regex:o,$options:"i"}},{department:{$regex:o,$options:"i"}}]);let c=parseInt(l,10),m=parseInt(s,10),u=(c-1)*m,g=await p.R5.countDocuments(d),f=await p.R5.find(d).select("-password").skip(u).limit(m).sort({name:1}).lean(),h=f.map(e=>({id:e._id,name:e.name,email:e.email,profileImage:e.profileImage,phoneNumber:e.phoneNumber,specialization:e.specialization,hospital:e.hospital,department:e.department,yearsOfExperience:e.yearsOfExperience,ratings:e.ratings}));return t.status(200).json({doctors:h,pagination:{total:g,page:c,pageSize:m,totalPages:Math.ceil(g/m)}})}catch(e){return console.error("Error fetching doctors:",e),t.status(500).json({message:"Failed to fetch doctors",error:e.message})}}let l=(0,s.l)(r,"default"),d=(0,s.l)(r,"config"),c=new i.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/doctors",pathname:"/api/doctors",bundlePath:"",filename:""},userland:r})}};var t=require("../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[222,149,977],()=>__webpack_exec__(9954));module.exports=a})();