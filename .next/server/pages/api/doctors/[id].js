"use strict";(()=>{var e={};e.id=254,e.ids=[254],e.modules={1185:e=>{e.exports=require("mongoose")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},1466:(e,t,a)=>{a.r(t),a.d(t,{config:()=>c,default:()=>u,routeModule:()=>p});var i={};a.r(i),a.d(i,{default:()=>handler});var o=a(1802),r=a(7153),n=a(6249),s=a(4149),d=a(5977),l=a(2793);async function handler(e,t){if("GET"!==e.method)return t.status(405).json({message:"Method not allowed"});let{id:a}=e.query;if(!a||"string"!=typeof a)return t.status(400).json({message:"Invalid doctor ID"});try{await (0,s.Z)();let e=await d.R5.findById(a).select("-password");if(!e)return t.status(404).json({message:"Doctor not found"});let i=e.toObject(),o=new Date,r=await l.Z.find({doctorId:a,dateTime:{$gte:o},status:{$nin:["cancelled","no-show"]}}).select("dateTime duration").lean(),n={id:i._id,name:i.name,email:i.email,profileImage:i.profileImage,phoneNumber:i.phoneNumber,specialization:i.specialization,yearsOfExperience:i.yearsOfExperience,hospital:i.hospital,department:i.department,availability:i.availability||[],education:i.education||[],ratings:i.ratings,upcomingAppointmentsCount:r.length};return t.status(200).json({doctor:n})}catch(e){return console.error("Error fetching doctor details:",e),t.status(500).json({message:"Failed to fetch doctor details",error:e.message})}}let u=(0,n.l)(i,"default"),c=(0,n.l)(i,"config"),p=new o.PagesAPIRouteModule({definition:{kind:r.x.PAGES_API,page:"/api/doctors/[id]",pathname:"/api/doctors/[id]",bundlePath:"",filename:""},userland:i})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[222,149,977,793],()=>__webpack_exec__(1466));module.exports=a})();